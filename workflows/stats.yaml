name: Actualizar Estad√≠sticas en README de Workflows

on:
  schedule:
    - cron: "0 0 * * *"  # Se ejecuta una vez al d√≠a
  workflow_dispatch:  # Permite ejecutarlo manualmente

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - name: Clonar el repositorio
        uses: actions/checkout@v3

      - name: Obtener estad√≠sticas
        run: |
          echo "## üìä Estad√≠sticas del Repositorio" > .github/workflows/README.md
          echo "" >> .github/workflows/README.md
          echo "| M√©trica         | Valor |" >> .github/workflows/README.md
          echo "|----------------|-------|" >> .github/workflows/README.md
          echo "| üìå Commits     | $(git rev-list --count HEAD) |" >> .github/workflows/README.md
          echo "| üêû Issues      | $(gh issue list --repo ${{ github.repository }} --state all --json number | jq '. | length') |" >> .github/workflows/README.md
          echo "| üîÄ Pull Requests | $(gh pr list --repo ${{ github.repository }} --state all --json number | jq '. | length') |" >> .github/workflows/README.md
          echo "| üë• Contribuyentes | $(gh repo view ${{ github.repository }} --json contributors --jq '.contributors | length') |" >> .github/workflows/README.md

      - name: Hacer commit y push de los cambios
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "github-actions@github.com"
          git add .github/workflows/README.md
          git commit -m "Actualizar estad√≠sticas en README de workflows"
          git push

